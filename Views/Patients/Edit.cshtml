@model Hospital_Managment_System.Models.ViewModels.PatientViewModel

@{
    ViewData["Title"] = "Edit Patient Information";
}

<div class="container mt-5 settings-page">
    <h2 class="text-primary mb-4">Edit Patient Information</h2>
    <hr />

    <form asp-action="Edit" method="post" class="mt-3">
        <div class="row mb-3">
            <div class="col-md-6">
                <label asp-for="FirstName" class="form-label">First Name</label>
                <input asp-for="FirstName" class="form-control shadow-sm" />
                <span asp-validation-for="FirstName" class="text-danger"></span>
            </div>
            <div class="col-md-6">
                <label asp-for="LastName" class="form-label">Last Name</label>
                <input asp-for="LastName" class="form-control shadow-sm" />
                <span asp-validation-for="LastName" class="text-danger"></span>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-6">
                <label asp-for="Email" class="form-label">Email</label>
                <input asp-for="Email" class="form-control shadow-sm" />
                <span asp-validation-for="Email" class="text-danger"></span>
            </div>
            <div class="col-md-6">
                <label asp-for="PhoneNumber" class="form-label">Phone Number</label>
                <input asp-for="PhoneNumber" class="form-control shadow-sm" />
                <span asp-validation-for="PhoneNumber" class="text-danger"></span>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-6">
                <label asp-for="DateOfBirth" class="form-label">Date of Birth</label>
                <input asp-for="DateOfBirth" class="form-control shadow-sm" type="date" />
                <span asp-validation-for="DateOfBirth" class="text-danger"></span>
            </div>
            <div class="col-md-6">
                <label asp-for="Gender" class="form-label">Gender</label>
                <select asp-for="Gender" asp-items="ViewBag.Gender" class="form-select shadow-sm"></select>
                <span asp-validation-for="Gender" class="text-danger"></span>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-12">
                <label asp-for="Address" class="form-label">Address</label>
                <input asp-for="Address" class="form-control shadow-sm" />
                <span asp-validation-for="Address" class="text-danger"></span>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-12">
                <label asp-for="EmergencyContact" class="form-label">Emergency Contact</label>
                <input asp-for="EmergencyContact" class="form-control shadow-sm" />
                <span asp-validation-for="EmergencyContact" class="text-danger"></span>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-6">
                <label asp-for="PrimaryDoctorId" class="form-label">Primary Doctor</label>
                <select asp-for="PrimaryDoctorId" asp-items="ViewBag.PrimaryDoctorId" class="form-select shadow-sm"></select>
                <span asp-validation-for="PrimaryDoctorId" class="text-danger"></span>
            </div>
        </div>

        <div class="d-flex justify-content-between mt-4">
            @inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor

            @if (HttpContextAccessor.HttpContext.Request.Query["referrer"] == "Index")
            {
                <a href="@Url.Action("Index", "Patients")" class="btn btn-secondary btn-lg">
                    <i class="bi bi-arrow-left"></i> Back to Index
                </a>
            }
            else if (HttpContextAccessor.HttpContext.Request.Query["referrer"] == "AdminViewPrescriptions")
            {
                <a href="@Url.Action("AdminViewPrescriptions", "Prescriptions")" class="btn btn-secondary btn-lg">
                    <i class="bi bi-arrow-left"></i> Back to Prescriptions
                </a>
            }
            else if (HttpContextAccessor.HttpContext.Request.Query["referrer"] == "MyDetails")
            {
                <a href="@Url.Action("MyDetails", "Patients")" class="btn btn-secondary btn-lg">
                    <i class="bi bi-arrow-left"></i> Back to My Details
                </a>
            }
            else
            {
                <a asp-action="Details" asp-route-id="@Model.Id" class="btn btn-secondary btn-lg">
                    <i class="bi bi-arrow-left"></i> Back
                </a>
            }

            <button type="submit" class="btn btn-primary btn-lg">
                <i class="bi bi-save"></i> Save Changes
            </button>
        </div>

    </form>
</div>

@section Styles {
    <style>
        .settings-page {
            max-width: 900px;
            margin: 0 auto;
        }

            .settings-page .form-label {
                font-weight: bold;
                color: #007bff;
            }

            .settings-page .form-control, .form-select {
                border-radius: 10px;
                border: 1px solid #ddd;
            }

            .settings-page .btn-lg {
                padding: 10px 20px;
            }

        /* Tooltip for Edit button */
        .btn-outline-secondary[title]:hover::after {
            content: attr(title);
            position: absolute;
            bottom: -2.5rem;
            right: 0;
            background-color: #333;
            color: #fff;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8rem;
        }

        .btn-primary i, .btn-secondary i {
            margin-right: 5px;
        }

        .settings-page .form-control:focus {
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
        }
    </style>
}

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.js"></script>
    <partial name="_ValidationScriptsPartial" />
}
